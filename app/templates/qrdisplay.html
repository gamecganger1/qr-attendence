{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Scan QR</h2>
  <p>Scan teacher QR from your phone camera (open camera and point at teacher's screen image).</p>

  {% if qr_list and qr_list[0] %}
    {% set qr = qr_list[0] %}
    <div class="qr-box text-center">
      <img src="{{ url_for('static', filename='qrcodes/' + qr.filename) }}" alt="QR Code" style="max-width:250px;">
      <p class="mt-2"><strong>{{ qr.teacher_name }}</strong></p>

      <form action="{{ url_for('main.student_mark') }}" method="post" class="mt-3">
        <!-- hidden values populated so token + teacher_id always sent -->
        <input type="hidden" name="token" value="{{ qr.token }}">
        <input type="hidden" name="teacher_id" value="{{ qr.teacher_id }}">

        <div class="form-group">
          <input type="email" name="email" class="form-control" placeholder="Your email (if not logged in)">
        </div>
        <div class="form-group mt-2">
          <button class="btn btn-primary" type="submit">Mark Attendance</button>
        </div>
      </form>
    </div>
  {% else %}
    <p>No QR codes available right now.</p>
  {% endif %}
</div>
{% endblock %}